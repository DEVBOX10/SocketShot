<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="Scripts/jquery-1.6.4.js"></script>
    <script src="Scripts/jquery.signalR-2.3.0.js"></script>
    <script src="signalr/hubs"></script>

    <script type="text/javascript">
		var hubProxy = $.connection.streamHub;

        $.connection.hub.start()
			.done(function () {
				console.log('Now connected, connection ID=' + $.connection.hub.id);
				$("#loading").text("Connected to hub, waiting for Stream...");
			})
			.fail(function () {
				console.log('Could not Connect!');
			});

        hubProxy.client.sendB64Screen = function (bitmap) {
            //console.log('received');

			$("#imagediv").show();
			$("#loading").hide();

			$("#imagediv").attr("src", bitmap);
            //console.log(document.getElementById("imagediv").getAttribute('src'));
		};

		hubProxy.client.sendScreenDetailed = function (stream) {
			//console.log("Screen Detailed received");
			//debugger;
			$("#imagediv").show();
			$("#loading").hide();

			$("#imagediv").attr("src", stream.JsonB64Bitmap);
		};
    </script>
</head>
<body>
    <img style="display: none; width: 100%;" id="imagediv" />
    <div id="loading">Connecting to Hub...</div>
</body>
</html>